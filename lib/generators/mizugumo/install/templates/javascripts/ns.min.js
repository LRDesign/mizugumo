/*
 * NinjaScript - 0.9
 * written by and copyright 2010-2011 Judson Lester and Logical Reality Design
 * Licensed under the MIT license
 *
 * 06-29-2011
 */
/*
 RequireJS 0.24.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var require,define;
(function(){function i(b){return s.call(b)==="[object Function]"}function l(b){return s.call(b)==="[object Array]"}function c(b,a,k){for(var h in a)if(!(h in d)&&(!(h in b)||k))b[h]=a[h];return j}function e(b,d,a){var h,k,c;for(h=0;c=d[h];h++){c=typeof c==="string"?{name:c}:c;k=c.location;if(a&&(!k||k.indexOf("/")!==0&&k.indexOf(":")===-1))k=a+"/"+(k||c.name);b[c.name]={name:c.name,location:k||c.name,lib:c.lib||"lib",main:(c.main||"lib/main").replace(q,"").replace(m,"")}}}function a(a){function k(b){var d,a;
for(d=0;a=b[d];d++)if(a===".")b.splice(d,1),d-=1;else if(a==="..")if(d===1&&(b[2]===".."||b[0]===".."))break;else d>0&&(b.splice(d-1,2),d-=2)}function g(b,d){var a,h;b.charAt(0)==="."&&d&&(w.pkgs[d]?d=[d]:(d=d.split("/"),d=d.slice(0,d.length-1)),b=d.concat(b.split("/")),k(b),h=w.pkgs[a=b[0]],b=b.join("/"),h&&b===a+"/"+h.main&&(b=a));return b}function y(b,d){var a=b?b.indexOf("!"):-1,k=null,h=d?d.name:null,c=b,o,f;a!==-1&&(k=b.substring(0,a),b=b.substring(a+1,b.length));k&&(k=g(k,h));b&&(o=k?(a=u[k])?
a.normalize?a.normalize(b,function(b){return g(b,h)}):g(b,h):"__$p"+h+"@"+b:g(b,h),f=N[o],f||(f=j.toModuleUrl?j.toModuleUrl(n,b,d):n.nameToUrl(b,null,d),N[o]=f));return{prefix:k,name:o,parentMap:d,url:f,originalName:c,fullName:k?k+"!"+o:o}}function f(){var b=!0,d=w.priorityWait,a,k;if(d){for(k=0;a=d[k];k++)if(!B[a]){b=!1;break}b&&delete w.priorityWait}return b}function m(b){return function(d){b.exports=d}}function s(b,d,a){return function(){var k=[].concat(x.call(arguments,0)),h;if(a&&i(h=k[k.length-
1]))h.__requireJsBuild=!0;k.push(d);return b.apply(null,k)}}function p(b,d){var a=s(n.require,b,d);c(a,{nameToUrl:s(n.nameToUrl,b),toUrl:s(n.toUrl,b),isDefined:s(n.isDefined,b),ready:j.ready,isBrowser:j.isBrowser});if(j.paths)a.paths=j.paths;return a}function q(b){var d=b.prefix,a=b.fullName;H[a]||a in u||(d&&!O[d]&&(O[d]=void 0,(S[d]||(S[d]=[])).push(b),(C[d]||(C[d]=[])).push({onDep:function(b){if(b===d){var a,k,h,K,c,o,g=S[d];if(g)for(h=0;a=g[h];h++)if(b=a.fullName,a=y(a.originalName,a.parentMap),
a=a.fullName,k=C[b]||[],K=C[a],a!==b){b in H&&(delete H[b],H[a]=!0);C[a]=K?K.concat(k):k;delete C[b];for(K=0;K<k.length;K++){o=k[K].depArray;for(c=0;c<o.length;c++)o[c]===b&&(o[c]=a)}}delete S[d]}}}),q(y(d))),n.paused.push(b))}function r(b){var d,a,k;d=b.callback;var h=b.fullName;k=[];var c=b.depArray;if(d&&i(d)){if(c)for(d=0;d<c.length;d++)k.push(b.deps[c[d]]);a=j.execCb(h,b.callback,k);if(h)if(b.usingExports&&a===void 0&&(!b.cjsModule||!("exports"in b.cjsModule)))a=u[h];else if(b.cjsModule&&"exports"in
b.cjsModule)a=u[h]=b.cjsModule.exports;else{if(h in u&&!b.usingExports)return j.onError(Error(h+" has already been defined"));u[h]=a}}else h&&(a=u[h]=d);if(h&&(k=C[h])){for(d=0;d<k.length;d++)k[d].onDep(h,a);delete C[h]}if(L[b.waitId])delete L[b.waitId],b.isDone=!0,n.waitCount-=1,n.waitCount===0&&(G=[])}function P(d,a,k,h){var d=y(d,h),c=d.name,o=d.fullName,g={},j={waitId:c||b+U++,depCount:0,depMax:0,prefix:d.prefix,name:c,fullName:o,deps:{},depArray:a,callback:k,onDep:function(b,d){b in j.deps||
(j.deps[b]=d,j.depCount+=1,j.depCount===j.depMax&&r(j))}},f,e;if(o){if(o in u||B[o]===!0)return;H[o]=!0;B[o]=!0;n.jQueryDef=o==="jquery"}for(k=0;k<a.length;k++)if(f=a[k])f=y(f,c?d:h),e=f.fullName,a[k]=e,e==="require"?j.deps[e]=p(d):e==="exports"?(j.deps[e]=u[o]={},j.usingExports=!0):e==="module"?(j.cjsModule=f=j.deps[e]={id:c,uri:c?n.nameToUrl(c,null,h):void 0},f.setExports=m(f)):e in u&&!(e in L)?j.deps[e]=u[e]:g[e]||(j.depMax+=1,q(f),(C[e]||(C[e]=[])).push(j),g[e]=!0);j.depCount===j.depMax?r(j):
(L[j.waitId]=j,G.push(j),n.waitCount+=1)}function l(b){P.apply(null,b);B[b[0]]=!0}function A(b){if(!n.jQuery&&(b=b||(typeof jQuery!=="undefined"?jQuery:null))&&"readyWait"in b)if(n.jQuery=b,l(["jquery",[],function(){return jQuery}]),n.scriptCount)b.readyWait+=1,n.jQueryIncremented=!0}function E(b,d){if(!b.isDone){var a=b.fullName,k=b.depArray,h,c;if(a){if(d[a])return u[a];d[a]=!0}for(c=0;c<k.length;c++)if((h=k[c])&&!b.deps[h]&&L[h])b.onDep(h,E(L[h],d));return a?u[a]:void 0}}function F(){var b=w.waitSeconds*
1E3,a=b&&n.startTime+b<(new Date).getTime(),b="",k=!1,h=!1,c;if(!(n.pausedCount>0)){if(w.priorityWait)if(f())z();else return;for(c in B)if(!(c in d)&&(k=!0,!B[c]))if(a)b+=c+" ";else{h=!0;break}if(k||n.waitCount){if(a&&b)return c=Error("require.js load timeout for modules: "+b),c.requireType="timeout",c.requireModules=b,j.onError(c);if(h||n.scriptCount)(t||T)&&setTimeout(F,50);else if(n.waitCount){for(M=0;b=G[M];M++)E(b,{});F()}else j.checkReadyState()}}}function J(b,d){var a=d.name,k=d.fullName,h;
if(!(k in u||k in B))O[b]||(O[b]=u[b]),B[k]||(B[k]=!1),h=function(h){if(require.onPluginLoad)require.onPluginLoad(n,b,a,h);r({prefix:d.prefix,name:d.name,fullName:d.fullName,callback:function(){return h}});B[k]=!0},h.fromText=function(b,d){var a=o;n.loaded[b]=!1;n.scriptCount+=1;a&&(o=!1);eval(d);a&&(o=!0);n.completeLoad(b)},O[b].load(a,p(d.parentMap,!0),h,w)}function Q(b){b.prefix&&b.name.indexOf("__$p")===0&&u[b.prefix]&&(b=y(b.originalName,b.parentMap));var d=b.prefix,a=b.fullName;!H[a]&&!B[a]&&
(H[a]=!0,d?u[d]?J(d,b):(R[d]||(R[d]=[],(C[d]||(C[d]=[])).push({onDep:function(b){if(b===d){for(var a,k=R[d],b=0;b<k.length;b++)a=k[b],J(d,y(a.originalName,a.parentMap));delete R[d]}}})),R[d].push(b)):j.load(n,a,b.url))}var n,z,w={waitSeconds:7,baseUrl:v.baseUrl||"./",paths:{},pkgs:{}},D=[],H={require:!0,exports:!0,module:!0},N={},u={},B={},L={},G=[],U=0,C={},O={},R={},V=0,S={};z=function(){var b,d,a;V+=1;if(n.scriptCount<=0)n.scriptCount=0;for(;D.length;)if(b=D.shift(),b[0]===null)return j.onError(Error("Mismatched anonymous require.def modules"));
else l(b);if(!w.priorityWait||f())for(;n.paused.length;){a=n.paused;n.pausedCount+=a.length;n.paused=[];for(d=0;b=a[d];d++)Q(b);n.startTime=(new Date).getTime();n.pausedCount-=a.length}V===1&&F();V-=1};n={contextName:a,config:w,defQueue:D,waiting:L,waitCount:0,specified:H,loaded:B,urlMap:N,scriptCount:0,urlFetched:{},defined:u,paused:[],pausedCount:0,plugins:O,managerCallbacks:C,makeModuleMap:y,normalize:g,configure:function(b){var a,k,h;b.baseUrl&&b.baseUrl.charAt(b.baseUrl.length-1)!=="/"&&(b.baseUrl+=
"/");a=w.paths;h=w.pkgs;c(w,b,!0);if(b.paths){for(k in b.paths)k in d||(a[k]=b.paths[k]);w.paths=a}if((a=b.packagePaths)||b.packages){if(a)for(k in a)k in d||e(h,a[k],k);b.packages&&e(h,b.packages);w.pkgs=h}if(b.priority)k=n.requireWait,n.requireWait=!1,n.takeGlobalQueue(),z(),n.require(b.priority),z(),n.requireWait=k,w.priorityWait=b.priority;if(b.deps||b.callback)n.require(b.deps||[],b.callback);b.ready&&j.ready(b.ready)},isDefined:function(b,d){return y(b,d).fullName in u},require:function(b,d,
k){if(typeof b==="string"){if(j.get)return j.get(n,b,d);d=y(b,d);b=u[d.fullName];return b===void 0?j.onError(Error("require: module name '"+d.fullName+"' has not been loaded yet for context: "+a)):b}P(null,b,d,k);if(!n.requireWait)for(;!n.scriptCount&&n.paused.length;)z()},takeGlobalQueue:function(){h.length&&(I.apply(n.defQueue,[n.defQueue.length-1,0].concat(h)),h=[])},completeLoad:function(b){var d;for(n.takeGlobalQueue();D.length;)if(d=D.shift(),d[0]===null){d[0]=b;break}else if(d[0]===b)break;
else l(d),d=null;d?l(d):l([b,[],b==="jquery"&&typeof jQuery!=="undefined"?function(){return jQuery}:null]);B[b]=!0;A();j.isAsync&&(n.scriptCount-=1);z();j.isAsync||(n.scriptCount-=1)},toUrl:function(b,d){var a=b.lastIndexOf("."),k=null;a!==-1&&(k=b.substring(a,b.length),b=b.substring(0,a));return n.nameToUrl(b,k,d)},nameToUrl:function(b,d,a){var h,c,o,f,e=n.config;if(b.indexOf("./")===0||b.indexOf("../")===0)a=a&&a.url?a.url.split("/"):[],a.length&&a.pop(),a=a.concat(b.split("/")),k(a),d=a.join("/")+
(d?d:j.jsExtRegExp.test(b)?"":".js");else if(b=g(b,a),j.jsExtRegExp.test(b))d=b+(d?d:"");else{h=e.paths;c=e.pkgs;a=b.split("/");for(f=a.length;f>0;f--)if(o=a.slice(0,f).join("/"),h[o]){a.splice(0,f,h[o]);break}else if(o=c[o]){b=b===o.name?o.location+"/"+o.main:o.location+"/"+o.lib;a.splice(0,f,b);break}d=a.join("/")+(d||".js");d=(d.charAt(0)==="/"||d.match(/^\w+:/)?"":e.baseUrl)+d}return e.urlArgs?d+((d.indexOf("?")===-1?"?":"&")+e.urlArgs):d}};n.jQueryCheck=A;n.resume=z;return n}function f(){var b,
d,a;if(y&&y.readyState==="interactive")return y;b=document.getElementsByTagName("script");for(d=b.length-1;d>-1&&(a=b[d]);d--)if(a.readyState==="interactive")return y=a;return null}var p=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,r=/require\(["']([^'"\s]+)["']\)/g,q=/^\.\//,m=/\.js$/,s=Object.prototype.toString,g=Array.prototype,x=g.slice,I=g.splice,t=!!(typeof window!=="undefined"&&navigator&&document),T=!t&&typeof importScripts!=="undefined",F=t&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,
G=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",b="_r@@",d={},k={},h=[],y=null,o=!1,j,g={},P,v,z,Q,E,J,A,M,N,U,D;if(typeof require!=="undefined")if(i(require))return;else g=require;j=require=function(b,d,h){var c="_",o;!l(b)&&typeof b!=="string"&&(o=b,l(d)?(b=d,d=h):b=[]);if(o&&o.context)c=o.context;h=k[c]||(k[c]=a(c));o&&h.configure(o);return h.require(b,d)};j.version="0.24.0";j.isArray=l;j.isFunction=i;j.mixin=c;j.jsExtRegExp=/^\/|:|\?|\.js$/;v=j.s={contexts:k,skipAsync:{},isPageLoaded:!t,
readyCalls:[]};if(j.isAsync=j.isBrowser=t)if(z=v.head=document.getElementsByTagName("head")[0],Q=document.getElementsByTagName("base")[0])z=v.head=Q.parentNode;j.onError=function(b){throw b;};j.load=function(b,d,a){var k=b.contextName,h=b.urlFetched,c=b.loaded;c[d]||(c[d]=!1);if(!h[a]&&(b.scriptCount+=1,j.attach(a,k,d),h[a]=!0,b.jQuery&&!b.jQueryIncremented))b.jQuery.readyWait+=1,b.jQueryIncremented=!0};define=j.def=function(b,d,a){var c;typeof b!=="string"&&(a=d,d=b,b=null);j.isArray(d)||(a=d,d=
[]);!b&&!d.length&&j.isFunction(a)&&a.length&&(a.toString().replace(p,"").replace(r,function(b,a){d.push(a)}),d=["require","exports","module"].concat(d));if(o){c=P||f();if(!c)return j.onError(Error("ERROR: No matching script interactive for "+a));b||(b=c.getAttribute("data-requiremodule"));c=k[c.getAttribute("data-requirecontext")]}(c?c.defQueue:h).push([b,d,a])};define.amd={multiversion:!0,plugins:!0};j.execCb=function(b,d,a){return d.apply(null,a)};j.onScriptLoad=function(b){var d=b.currentTarget||
b.srcElement,a;if(b.type==="load"||F.test(d.readyState))y=null,b=d.getAttribute("data-requirecontext"),a=d.getAttribute("data-requiremodule"),k[b].completeLoad(a),d.detachEvent&&!G?d.detachEvent("onreadystatechange",j.onScriptLoad):d.removeEventListener("load",j.onScriptLoad,!1)};j.attach=function(b,d,a,h,c){var f;if(t)return h=h||j.onScriptLoad,f=document.createElement("script"),f.type=c||"text/javascript",f.charset="utf-8",f.async=!v.skipAsync[b],f.setAttribute("data-requirecontext",d),f.setAttribute("data-requiremodule",
a),f.attachEvent&&!G?(o=!0,f.attachEvent("onreadystatechange",h)):f.addEventListener("load",h,!1),f.src=b,P=f,Q?z.insertBefore(f,Q):z.appendChild(f),P=null,f;else if(T)h=k[d],d=h.loaded,d[a]=!1,importScripts(b),h.completeLoad(a);return null};if(t){E=document.getElementsByTagName("script");for(M=E.length-1;M>-1&&(J=E[M]);M--){if(!z)z=J.parentNode;if(A=J.getAttribute("data-main")){if(!g.baseUrl)E=A.split("/"),J=E.pop(),E=E.length?E.join("/")+"/":"./",g.baseUrl=E,A=J.replace(m,"");g.deps=g.deps?g.deps.concat(A):
[A];break}}}v.baseUrl=g.baseUrl;j.pageLoaded=function(){if(!v.isPageLoaded){v.isPageLoaded=!0;N&&clearInterval(N);if(U)document.readyState="complete";j.callReady()}};j.checkReadyState=function(){var b=v.contexts,a;for(a in b)if(!(a in d)&&b[a].waitCount)return;v.isDone=!0;j.callReady()};j.callReady=function(){var b=v.readyCalls,a,k,h;if(v.isPageLoaded&&v.isDone){if(b.length){v.readyCalls=[];for(a=0;k=b[a];a++)k()}b=v.contexts;for(h in b)if(!(h in d)&&(a=b[h],a.jQueryIncremented))a.jQuery.ready(!0),
a.jQueryIncremented=!1}};j.ready=function(b){v.isPageLoaded&&v.isDone?b():v.readyCalls.push(b);return j};if(t){if(document.addEventListener){if(document.addEventListener("DOMContentLoaded",j.pageLoaded,!1),window.addEventListener("load",j.pageLoaded,!1),!document.readyState)U=!0,document.readyState="loading"}else window.attachEvent&&(window.attachEvent("onload",j.pageLoaded),self===self.top&&(N=setInterval(function(){try{document.body&&(document.documentElement.doScroll("left"),j.pageLoaded())}catch(b){}},
30)));document.readyState==="complete"&&j.pageLoaded()}j(g);if(j.isAsync&&typeof setTimeout!=="undefined")D=v.contexts[g.context||"_"],D.requireWait=!0,setTimeout(function(){D.requireWait=!1;D.takeGlobalQueue();D.jQueryCheck();D.scriptCount||D.resume();j.checkReadyState()},0)})();
define("utils",["require","exports","module"],function(){return{log:function(){},isArray:function(i){return i.constructor==Array},forEach:function(i,l,c){if(typeof i.forEach=="function")return i.forEach(l,c);else if(typeof Array.prototype.forEach=="function")return Array.prototype.forEach.call(i,l,c);else for(var e=Number(i.length),a=0;a<e;a+=1)typeof i[a]!="undefined"&&l.call(c,i[a],a,i)}}});define("ninja/exceptions",["require","exports","module"],function(){return{CouldntChoose:function(){},TransformFailed:function(){}}});
define("ninja/behaviors",["ninja/exceptions"],function(i){var l=i.CouldntChoose,i={meta:function(c,e){c(this);this.chooser=e}};i.meta.prototype={choose:function(c){var e=this.chooser(c);if(e!==void 0)return e.choose(c);else throw new l;}};i.select=function(c){this.menu=c};i.select.prototype={choose:function(c){for(var e in this.menu)if(jQuery(c).is(e))return this.menu[e].choose(c);return null}};i.base=function(c){this.helpers={};this.eventHandlers=[];this.priority=this.lexicalOrder=0;if(typeof c.transform==
"function")this.transform=c.transform,delete c.transform;if(typeof c.helpers!="undefined")this.helpers=c.helpers,delete c.helpers;if(typeof c.priority!="undefined")this.priority=c.priority;delete c.priority;this.eventHandlers=typeof c.events!="undefined"?c.events:c;return this};i.base.prototype={apply:function(c){var e=this.inContext({}),c=this.applyTransform(e,c);jQuery(c).data("ninja-visited",e);this.applyEventHandlers(e,c);return c},priority:function(c){this.priority=c;return this},choose:function(){return this},
inContext:function(c){function e(){}e.prototype=c;return Ninja.tools.enrich(new e,this.helpers)},applyTransform:function(c,e){var a=this.transform.call(c,e);return a===void 0?e:a},applyEventHandlers:function(c,e){for(var a in this.eventHandlers){var f=this.eventHandlers[a];jQuery(e).bind(a,this.makeHandler.call(c,f))}return e},recordEventHandlers:function(c,e){for(var a in this.eventHandlers)c.recordHandler(this,a,function(c){return this.makeHandler.call(e,this.eventHandlers[a],c)})},buildHandler:function(c,
e,a){var f,p=!0,r=!0,q=!1,m=!1,e=this.eventHandlers[e];if(typeof e=="function")f=e;else{f=e[0];for(var e=e.slice(1,e.length),s=e.length,g=0;g<s;g++){if(e[g]=="andDoDefault"||e[g]=="allowDefault")p=!1;if(e[g]=="allowPropagate"||e[g]=="dontStopPropagation")r=!1;e[g]=="andDoOthers"&&(q=!1);e[g]=="changesDOM"&&(m=!0)}}e=function(g){f.call(c,g,this,a);return!p};p&&(e=this.prependAction(e,function(a){a.preventDefault()}));r&&(e=this.prependAction(e,function(a){a.stopPropagation()}));q&&(e=this.prependAction(e,
function(a){a.stopImmediatePropagation()}));m&&(e=this.appendAction(e,function(){Ninja.tools.fireMutationEvent()}));return e},prependAction:function(c,e){return function(a){e.call(this,a);return c.call(this,a)}},appendAction:function(c,e){return function(a){var f=c.call(this,a);e.call(this,a);return f}},transform:function(c){return c}};return i});
define("sizzle-1.0",["require","exports","module"],function(){function i(b){for(var d="",a,h=0;b[h];h++)a=b[h],a.nodeType===3||a.nodeType===4?d+=a.nodeValue:a.nodeType!==8&&(d+=i(a.childNodes));return d}function l(b,d,a,h,c,o){for(var c=0,f=h.length;c<f;c++){var g=h[c];if(g){for(var g=g[b],e=!1;g;){if(g.sizcache===a){e=h[g.sizset];break}if(g.nodeType===1&&!o)g.sizcache=a,g.sizset=c;if(g.nodeName.toLowerCase()===d){e=g;break}g=g[b]}h[c]=e}}}function c(b,d,a,h,c,o){for(var c=0,f=h.length;c<f;c++){var g=
h[c];if(g){for(var g=g[b],e=!1;g;){if(g.sizcache===a){e=h[g.sizset];break}if(g.nodeType===1){if(!o)g.sizcache=a,g.sizset=c;if(typeof d!=="string"){if(g===d){e=!0;break}}else if(q.filter(d,[g]).length>0){e=g;break}}g=g[b]}h[c]=e}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,a=0,f=Object.prototype.toString,p=!1,r=!0;[0,0].sort(function(){r=!1;return 0});var q=function(b,d,a,h){var a=a||[],c=d=d||document;if(d.nodeType!==
1&&d.nodeType!==9)return[];if(!b||typeof b!=="string")return a;for(var g=[],j,p,r,i,l=!0,t=F(d),I=b;(e.exec(""),j=e.exec(I))!==null;)if(I=j[3],g.push(j[1]),j[2]){i=j[3];break}if(g.length>1&&s.exec(b))if(g.length===2&&m.relative[g[0]])p=G(g[0]+g[1],d);else for(p=m.relative[g[0]]?[d]:q(g.shift(),d);g.length;)b=g.shift(),m.relative[b]&&(b+=g.shift()),p=G(b,p);else if(!h&&g.length>1&&d.nodeType===9&&!t&&m.match.ID.test(g[0])&&!m.match.ID.test(g[g.length-1])&&(j=q.find(g.shift(),d,t),d=j.expr?q.filter(j.expr,
j.set)[0]:j.set[0]),d){j=h?{expr:g.pop(),set:x(h)}:q.find(g.pop(),g.length===1&&(g[0]==="~"||g[0]==="+")&&d.parentNode?d.parentNode:d,t);p=j.expr?q.filter(j.expr,j.set):j.set;for(g.length>0?r=x(p):l=!1;g.length;){var A=g.pop();j=A;m.relative[A]?j=g.pop():A="";j==null&&(j=d);m.relative[A](r,j,t)}}else r=[];r||(r=p);r||q.error(A||b);if(f.call(r)==="[object Array]")if(l)if(d&&d.nodeType===1)for(b=0;r[b]!=null;b++)r[b]&&(r[b]===!0||r[b].nodeType===1&&T(d,r[b]))&&a.push(p[b]);else for(b=0;r[b]!=null;b++)r[b]&&
r[b].nodeType===1&&a.push(p[b]);else a.push.apply(a,r);else x(r,a);i&&(q(i,c,a,h),q.uniqueSort(a));return a};q.uniqueSort=function(b){if(t&&(p=r,b.sort(t),p))for(var d=1;d<b.length;d++)b[d]===b[d-1]&&b.splice(d--,1);return b};q.matches=function(b,d){return q(b,null,null,d)};q.find=function(b,d,a){var h,c;if(!b)return[];for(var g=0,f=m.order.length;g<f;g++){var e=m.order[g];if(c=m.leftMatch[e].exec(b)){var s=c[1];c.splice(1,1);if(s.substr(s.length-1)!=="\\"&&(c[1]=(c[1]||"").replace(/\\/g,""),h=m.find[e](c,
d,a),h!=null)){b=b.replace(m.match[e],"");break}}}h||(h=d.getElementsByTagName("*"));return{set:h,expr:b}};q.filter=function(b,d,a,h){for(var c=b,g=[],f=d,e,s,r=d&&d[0]&&F(d[0]);b&&d.length;){for(var p in m.filter)if((e=m.leftMatch[p].exec(b))!=null&&e[2]){var i=m.filter[p],l,x;x=e[1];s=!1;e.splice(1,1);if(x.substr(x.length-1)!=="\\"){f===g&&(g=[]);if(m.preFilter[p])if(e=m.preFilter[p](e,f,a,g,h,r)){if(e===!0)continue}else s=l=!0;if(e)for(var t=0;(x=f[t])!=null;t++)if(x){l=i(x,e,t,f);var I=h^!!l;
a&&l!=null?I?s=!0:f[t]=!1:I&&(g.push(x),s=!0)}if(l!==void 0){a||(f=g);b=b.replace(m.match[p],"");if(!s)return[];break}}}if(b===c)if(s==null)q.error(b);else break;c=b}return f};q.error=function(b){throw"Syntax error, unrecognized expression: "+b;};var m=q.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href")}},relative:{"+":function(b,d){var a=typeof d==="string",h=a&&!/\W/.test(d),a=a&&!h;h&&(d=d.toLowerCase());for(var h=0,c=b.length,
g;h<c;h++)if(g=b[h]){for(;(g=g.previousSibling)&&g.nodeType!==1;);b[h]=a||g&&g.nodeName.toLowerCase()===d?g||!1:g===d}a&&q.filter(d,b,!0)},">":function(b,d){var a=typeof d==="string";if(a&&!/\W/.test(d))for(var d=d.toLowerCase(),h=0,c=b.length;h<c;h++){var g=b[h];if(g)a=g.parentNode,b[h]=a.nodeName.toLowerCase()===d?a:!1}else{h=0;for(c=b.length;h<c;h++)(g=b[h])&&(b[h]=a?g.parentNode:g.parentNode===d);a&&q.filter(d,b,!0)}},"":function(b,d,g){var h=a++,f=c;if(typeof d==="string"&&!/\W/.test(d))var e=
d=d.toLowerCase(),f=l;f("parentNode",d,h,b,e,g)},"~":function(b,d,g){var h=a++,f=c;if(typeof d==="string"&&!/\W/.test(d))var e=d=d.toLowerCase(),f=l;f("previousSibling",d,h,b,e,g)}},find:{ID:function(b,d,a){if(typeof d.getElementById!=="undefined"&&!a)return(b=d.getElementById(b[1]))?[b]:[]},NAME:function(b,d){if(typeof d.getElementsByName!=="undefined"){for(var a=[],h=d.getElementsByName(b[1]),c=0,g=h.length;c<g;c++)h[c].getAttribute("name")===b[1]&&a.push(h[c]);return a.length===0?null:a}},TAG:function(b,
d){return d.getElementsByTagName(b[1])}},preFilter:{CLASS:function(b,d,a,h,c,g){b=" "+b[1].replace(/\\/g,"")+" ";if(g)return b;for(var g=0,f;(f=d[g])!=null;g++)f&&(c^(f.className&&(" "+f.className+" ").replace(/[\t\n]/g," ").indexOf(b)>=0)?a||h.push(f):a&&(d[g]=!1));return!1},ID:function(b){return b[1].replace(/\\/g,"")},TAG:function(b){return b[1].toLowerCase()},CHILD:function(b){if(b[1]==="nth"){var d=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(b[2]==="even"&&"2n"||b[2]==="odd"&&"2n+1"||!/\D/.test(b[2])&&"0n+"+
b[2]||b[2]);b[2]=d[1]+(d[2]||1)-0;b[3]=d[3]-0}b[0]=a++;return b},ATTR:function(b,d,a,h,c,g){d=b[1].replace(/\\/g,"");!g&&m.attrMap[d]&&(b[1]=m.attrMap[d]);b[2]==="~="&&(b[4]=" "+b[4]+" ");return b},PSEUDO:function(b,d,a,h,c){if(b[1]==="not")if((e.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=q(b[3],null,null,d);else return b=q.filter(b[3],d,a,1^c),a||h.push.apply(h,b),!1;else if(m.match.POS.test(b[0])||m.match.CHILD.test(b[0]))return!0;return b},POS:function(b){b.unshift(!0);return b}},filters:{enabled:function(b){return b.disabled===
!1&&b.type!=="hidden"},disabled:function(b){return b.disabled===!0},checked:function(b){return b.checked===!0},selected:function(b){return b.selected===!0},parent:function(b){return!!b.firstChild},empty:function(b){return!b.firstChild},has:function(b,d,a){return!!q(a[3],b).length},header:function(b){return/h\d/i.test(b.nodeName)},text:function(b){return"text"===b.type},radio:function(b){return"radio"===b.type},checkbox:function(b){return"checkbox"===b.type},file:function(b){return"file"===b.type},
password:function(b){return"password"===b.type},submit:function(b){return"submit"===b.type},image:function(b){return"image"===b.type},reset:function(b){return"reset"===b.type},button:function(b){return"button"===b.type||b.nodeName.toLowerCase()==="button"},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)}},setFilters:{first:function(b,d){return d===0},last:function(b,d,a,h){return d===h.length-1},even:function(b,d){return d%2===0},odd:function(b,d){return d%2===1},lt:function(b,
d,a){return d<a[3]-0},gt:function(b,a,c){return a>c[3]-0},nth:function(b,a,c){return c[3]-0===a},eq:function(b,a,c){return c[3]-0===a}},filter:{PSEUDO:function(b,a,c,h){var g=a[1],f=m.filters[g];if(f)return f(b,c,a,h);else if(g==="contains")return(b.textContent||b.innerText||i([b])||"").indexOf(a[3])>=0;else if(g==="not"){a=a[3];c=0;for(h=a.length;c<h;c++)if(a[c]===b)return!1;return!0}else q.error("Syntax error, unrecognized expression: "+g)},CHILD:function(b,a){var c=a[1],h=b;switch(c){case "only":case "first":for(;h=
h.previousSibling;)if(h.nodeType===1)return!1;if(c==="first")return!0;h=b;case "last":for(;h=h.nextSibling;)if(h.nodeType===1)return!1;return!0;case "nth":var c=a[2],g=a[3];if(c===1&&g===0)return!0;var f=a[0],e=b.parentNode;if(e&&(e.sizcache!==f||!b.nodeIndex)){for(var s=0,h=e.firstChild;h;h=h.nextSibling)if(h.nodeType===1)h.nodeIndex=++s;e.sizcache=f}h=b.nodeIndex-g;return c===0?h===0:h%c===0&&h/c>=0}},ID:function(b,a){return b.nodeType===1&&b.getAttribute("id")===a},TAG:function(b,a){return a===
"*"&&b.nodeType===1||b.nodeName.toLowerCase()===a},CLASS:function(b,a){return(" "+(b.className||b.getAttribute("class"))+" ").indexOf(a)>-1},ATTR:function(b,a){var c=a[1],c=m.attrHandle[c]?m.attrHandle[c](b):b[c]!=null?b[c]:b.getAttribute(c),g=c+"",f=a[2],e=a[4];return c==null?f==="!=":f==="="?g===e:f==="*="?g.indexOf(e)>=0:f==="~="?(" "+g+" ").indexOf(e)>=0:!e?g&&c!==!1:f==="!="?g!==e:f==="^="?g.indexOf(e)===0:f==="$="?g.substr(g.length-e.length)===e:f==="|="?g===e||g.substr(0,e.length+1)===e+"-":
!1},POS:function(b,a,c,g){var f=m.setFilters[a[2]];if(f)return f(b,c,a,g)}}},s=m.match.POS,g;for(g in m.match)m.match[g]=RegExp(m.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),m.leftMatch[g]=RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[g].source.replace(/\\(\d+)/g,function(b,a){return"\\"+(a-0+1)}));var x=function(b,a){b=Array.prototype.slice.call(b,0);return a?(a.push.apply(a,b),a):b};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(I){x=function(b,a){var c=a||[];if(f.call(b)===
"[object Array]")Array.prototype.push.apply(c,b);else if(typeof b.length==="number")for(var g=0,e=b.length;g<e;g++)c.push(b[g]);else for(g=0;b[g];g++)c.push(b[g]);return c}}var t;document.documentElement.compareDocumentPosition?t=function(b,a){if(!b.compareDocumentPosition||!a.compareDocumentPosition)return b==a&&(p=!0),b.compareDocumentPosition?-1:1;var c=b.compareDocumentPosition(a)&4?-1:b===a?0:1;c===0&&(p=!0);return c}:"sourceIndex"in document.documentElement?t=function(b,a){if(!b.sourceIndex||
!a.sourceIndex)return b==a&&(p=!0),b.sourceIndex?-1:1;var c=b.sourceIndex-a.sourceIndex;c===0&&(p=!0);return c}:document.createRange&&(t=function(b,a){if(!b.ownerDocument||!a.ownerDocument)return b==a&&(p=!0),b.ownerDocument?-1:1;var c=b.ownerDocument.createRange(),g=a.ownerDocument.createRange();c.setStart(b,0);c.setEnd(b,0);g.setStart(a,0);g.setEnd(a,0);c=c.compareBoundaryPoints(Range.START_TO_END,g);c===0&&(p=!0);return c});(function(){var b=document.createElement("div"),a="script"+(new Date).getTime();
b.innerHTML="<a name='"+a+"'/>";var c=document.documentElement;c.insertBefore(b,c.firstChild);if(document.getElementById(a))m.find.ID=function(b,a,d){if(typeof a.getElementById!=="undefined"&&!d)return(a=a.getElementById(b[1]))?a.id===b[1]||typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id").nodeValue===b[1]?[a]:void 0:[]},m.filter.ID=function(b,a){var d=typeof b.getAttributeNode!=="undefined"&&b.getAttributeNode("id");return b.nodeType===1&&d&&d.nodeValue===a};c.removeChild(b);c=b=
null})();(function(){var b=document.createElement("div");b.appendChild(document.createComment(""));if(b.getElementsByTagName("*").length>0)m.find.TAG=function(b,a){var c=a.getElementsByTagName(b[1]);if(b[1]==="*"){for(var g=[],f=0;c[f];f++)c[f].nodeType===1&&g.push(c[f]);c=g}return c};b.innerHTML="<a href='#'></a>";if(b.firstChild&&typeof b.firstChild.getAttribute!=="undefined"&&b.firstChild.getAttribute("href")!=="#")m.attrHandle.href=function(b){return b.getAttribute("href",2)};b=null})();document.querySelectorAll&&
function(){var b=q,a=document.createElement("div");a.innerHTML="<p class='TEST'></p>";if(!(a.querySelectorAll&&a.querySelectorAll(".TEST").length===0)){q=function(a,d,c,g){d=d||document;if(!g&&d.nodeType===9&&!F(d))try{return x(d.querySelectorAll(a),c)}catch(f){}return b(a,d,c,g)};for(var c in b)q[c]=b[c];a=null}}();(function(){var b=document.createElement("div");b.innerHTML="<div class='test e'></div><div class='test'></div>";if(b.getElementsByClassName&&b.getElementsByClassName("e").length!==0&&
(b.lastChild.className="e",b.getElementsByClassName("e").length!==1))m.order.splice(1,0,"CLASS"),m.find.CLASS=function(b,a,c){if(typeof a.getElementsByClassName!=="undefined"&&!c)return a.getElementsByClassName(b[1])},b=null})();var T=document.compareDocumentPosition?function(b,a){return!!(b.compareDocumentPosition(a)&16)}:function(b,a){return b!==a&&(b.contains?b.contains(a):!0)},F=function(b){return(b=(b?b.ownerDocument||b:0).documentElement)?b.nodeName!=="HTML":!1},G=function(b,a){for(var c=[],
g="",f,e=a.nodeType?[a]:a;f=m.match.PSEUDO.exec(b);)g+=f[0],b=b.replace(m.match.PSEUDO,"");b=m.relative[b]?b+"*":b;f=0;for(var s=e.length;f<s;f++)q(b,e[f],c);return q.filter(g,c)};return q});
define("ninja/event-scribe",["require","exports","module"],function(){function i(){this.handlers={};this.currentElement=null}i.prototype={makeHandlersRemove:function(i){for(var c in this.handlers){var e=this.handlers[c];this.handlers[c]=function(a){e.call(this,a);jQuery(i).remove()}}},recordEventHandlers:function(i,c){if(this.currentElement!==i.element){if(this.currentElement!==null)this.makeHandlersRemove(this.currentElement),this.applyEventHandlers(this.currentElement),this.handlers={};this.currentElement=
i.element}for(var e in c.eventHandlers){var a=this.handlers[e];typeof a=="undefined"&&(a=function(){return!0});this.handlers[e]=c.buildHandler(i,e,a)}},applyEventHandlers:function(i){for(var c in this.handlers)jQuery(i).bind(c,this.handlers[c])}};return i});
define("ninja/behavior-collection",["sizzle-1.0","ninja/behaviors","utils","ninja/event-scribe","ninja/exceptions"],function(i,l,c,e,a){function f(a){this.lexicalCount=0;this.eventQueue=[];this.behaviors={};this.selectors=[];this.mutationTargets=[];this.tools=a;return this}var p=c.forEach,r=c.log,q=a.TransformFailed,m=a.CouldntChoose;f.prototype={addBehavior:function(a,g){c.isArray(g)?p(g,function(c){this.addBehavior(a,c)},this):g instanceof l.base?this.insertBehavior(a,g):g instanceof l.select?this.insertBehavior(a,
g):g instanceof l.meta?this.insertBehavior(a,g):typeof g=="function"?this.addBehavior(a,g()):(g=new l.base(g),this.addBehavior(a,g))},insertBehavior:function(a,c){c.lexicalOrder=this.lexicalCount;this.lexicalCount+=1;this.behaviors[a]===void 0?(this.selectors.push(a),this.behaviors[a]=[c]):this.behaviors[a].push(c)},addMutationTargets:function(a){this.mutationTargets=this.mutationTargets.concat(a)},fireMutationEvent:function(){var a=this.mutationTargets;if(a.length>0)for(var c=a[0];a.length>0;c=a.shift())jQuery(c).trigger("thisChangedDOM");
else this.tools.getRootOfDocument().trigger("thisChangedDOM")},mutationEventTriggered:function(a){this.eventQueue.length==0?(r("mutation event - first"),this.enqueueEvent(a),this.handleQueue()):(r("mutation event - queueing"),this.enqueueEvent(a))},enqueueEvent:function(a){var c=!1,f=[];p(this.eventQueue,function(e){c=c||jQuery.contains(e.target,a.target);jQuery.contains(a.target,e.target)||f.push(e)});if(!c)f.unshift(a),this.eventQueue=f},handleQueue:function(){for(;this.eventQueue.length!=0;)this.applyAll(this.eventQueue[0].target),
this.eventQueue.shift()},applyBehaviorsTo:function(a,c){return this.applyBehaviorsInContext(new this.tools.behaviorContext,a,c)},applyBehaviorsInContext:function(a,c,f){var m,i=new e;this.tools.enrich(i.handlers,a.eventHandlerSet);f=f.sort(function(a,c){return a.priority!=c.priority?a.priority===void 0?-1:c.priority===void 0?1:a.priority-c.priority:a.lexicalOrder-c.lexicalOrder});p(f,function(f){try{m=f.inContext(a),c=f.applyTransform(m,c),a=m,a.element=c,i.recordEventHandlers(a,f)}catch(e){if(e instanceof
q)r("!!! Transform failed");else throw r(e),e;}});jQuery(c).data("ninja-visited",a);i.applyEventHandlers(c);this.tools.enrich(a.eventHandlerSet,i.handlers);this.fireMutationEvent();return c},collectBehaviors:function(a,c,f){p(f,function(f){try{c.push(f.choose(a))}catch(e){if(e instanceof m)r("!!! couldn't choose");else throw r(e),e;}})},apply:function(a,c,f){var e=[],m=this.selectors.length;this.collectBehaviors(a,e,c);if(c=jQuery(a).data("ninja-visited"))c.unbindHandlers(),this.applyBehaviorsInContext(c,
a,e);else{for(typeof f=="undefined"&&(f=0);f<m;f++)jQuery(a).is(this.selectors[f])&&this.collectBehaviors(a,e,this.behaviors[this.selectors[f]]);this.applyBehaviorsTo(a,e)}},applyAll:function(a){for(var c=this.selectors.length,f=0;f<c;f++){var e=this;p(i(this.selectors[f],a),function(a){jQuery(a).data("ninja-visited")||e.apply(a,[],f)})}}};return f});
define("ninja/root-context",["utils"],function(i){var l=i.forEach;return function(c){function e(){this.stashedElements=[];this.eventHandlerSet={}}e.prototype=c.enrich(c,{stash:function(a){this.stashedElements.unshift(a)},unstash:function(){return this.stashedElements.shift()},clearStash:function(){this.stashedElements=[]},cascadeEvent:function(a){var c=Ninja.tools.hiddenDiv();l(this.stashedElements,function(e){e=jQuery(e);e.data("ninja-visited",this);jQuery(c).append(e);e.trigger(a)})},unbindHandlers:function(){var a=
jQuery(this.element);for(eventName in this.eventHandlerSet)a.unbind(eventName,this.eventHandlerSet[eventName])}});return e}});
define("ninja/tools",["ninja/behaviors","ninja/behavior-collection","ninja/exceptions","utils","ninja/root-context"],function(i,l,c,e,a){function f(c){this.ninja=c;this.behaviorContext=a(this)}var p=e.log;f.prototype={forEach:e.forEach,enrich:function(a,c){return jQuery.extend(a,c)},ensureDefaults:function(a,c){a instanceof Object||(a={});for(var f in c)typeof a[f]=="undefined"&&(typeof this.ninja.config[f]!="undefined"?a[f]=this.ninja.config[f]:typeof c[f]!="undefined"&&(a[f]=c[f]));return a},getRootOfDocument:function(){return jQuery("html")},
clearRootCollection:function(){this.ninja.behavior=this.ninja.goodBehavior;this.getRootOfDocument().data("ninja-behavior",null)},getRootCollection:function(){var a=this.getRootOfDocument();if(a.data("ninja-behavior")instanceof l)return a.data("ninja-behavior");var c=new l(this);a.data("ninja-behavior",c);return c},addMutationTargets:function(a){this.getRootCollection().addMutationTargets(a)},fireMutationEvent:function(){this.getRootCollection().fireMutationEvent()},detachSyntheticMutationEvents:function(){this.getRootCollection().fireMutationEvent=
function(){};this.getRootCollection().addMutationTargets=function(){}},copyAttributes:function(a,c,f){var e=RegExp("^"+f.join("$|^")+"$"),c=jQuery(c);this.forEach(a.attributes,function(a){e.test(a.nodeName)&&c.attr(a.nodeName,a.nodeValue)})},deriveElementsFrom:function(a,c){switch(typeof c){case "undefined":return a;case "string":return jQuery(c);case "function":return c(a)}},extractMethod:function(a,c){if(a.dataset!==void 0&&a.dataset.method!==void 0&&a.dataset.method.length>0)return p("Override via dataset: "+
a.dataset.method),a.dataset.method;if(a.dataset===void 0&&jQuery(a).attr("data-method")!==void 0)return p("Override via data-method: "+jQuery(a).attr("data-method")),jQuery(a).attr("data-method");if(typeof c!=="undefined")for(var f=0,e=c.length;f<e;f++)if(c[f].name=="Method")return p("Override via Method: "+c[f].value),c[f].value;return typeof a.method!=="undefined"?a.method:"GET"},cantTransform:function(){throw new TransformFailedException;},applyBehaviors:function(a,c){this.getRootCollection().apply(a,
c)},message:function(a,c){var f=this.ninja.config.messageWrapping(a,c);jQuery(this.ninja.config.messageList).append(f)},hiddenDiv:function(){var a=jQuery("div#ninja-hide");if(a.length>0)return a[0];a=jQuery("<div id='ninja-hide'></div>").css("display","none");jQuery("body").append(a);this.getRootCollection().applyBehaviorsTo(a,[this.ninja.suppressChangeEvents()]);return a}};return f});
define("ninja/configuration",["require","exports","module"],function(){return{messageWrapping:function(i,l){return"<div class='flash "+l+"'><p>"+i+"</p></div>"},messageList:"#messages",busyLaziness:200}});
define("ninja",["utils","ninja/tools","ninja/behaviors","ninja/configuration"],function(i,l,c,e){function a(){this.config=e;this.behavior=this.goodBehavior;this.tools=new l(this)}var f=i.log;a.prototype={packageBehaviors:function(a){result=a({does:c.base,chooses:c.meta,selects:c.select});this.tools.enrich(this,result)},packageTools:function(a){this.tools.enrich(l.prototype,a)},configure:function(a){this.tools.enrich(this.config,a)},goodBehavior:function(a){var c=this.tools.getRootCollection(),e;for(e in a)typeof a[e]==
"undefined"?f("Selector "+e+" not properly defined - ignoring"):c.addBehavior(e,a[e]);jQuery(window).load(function(){Ninja.go()})},badBehavior:function(){throw Error("Called Ninja.behavior() after Ninja.go() - don't do that.  'Go' means 'I'm done, please proceed'");},go:function(){function a(f){c.tools.getRootCollection().mutationEventTriggered(f)}var c=this;if(this.behavior!=this.misbehavior){var f=this.tools.getRootOfDocument();f.bind("DOMSubtreeModified DOMNodeInserted thisChangedDOM",a);f.one("DOMSubtreeModified DOMNodeInserted",
function(){c.tools.detachSyntheticMutationEvents()});this.behavior=this.badBehavior;this.tools.fireMutationEvent()}}};return new a});define("ninja/behaviors/utility",["ninja"],function(i){i.packageBehaviors(function(i){return{suppressChangeEvents:function(){return new i.does({events:{DOMSubtreeModified:function(){},DOMNodeInserted:function(){}}})}}})});
define("ninja/behaviors/standard",["ninja","utils"],function(i,l){var c=l.log;i.packageBehaviors(function(e){return{submitsAsAjax:function(a){return new e.chooses(function(c){c.asLink=i.submitsAsAjaxLink(a);c.asForm=i.submitsAsAjaxForm(a)},function(a){switch(a.tagName.toLowerCase()){case "a":return this.asLink;case "form":return this.asForm}})},submitsAsAjaxLink:function(a){a=i.tools.ensureDefaults(a,{busyElement:function(a){return $(a).parents("address,blockquote,body,dd,div,p,dl,dt,table,form,ol,ul,tr")[0]}});
return new e.does({priority:10,helpers:{findOverlay:function(c){return this.deriveElementsFrom(c,a.busyElement)}},events:{click:function(c){this.overlayAndSubmit(c.target,c.target.href,a.actions)}}})},submitsAsAjaxForm:function(a){a=i.tools.ensureDefaults(a,{busyElement:void 0});return new e.does({priority:20,helpers:{findOverlay:function(c){return this.deriveElementsFrom(c,a.busyElement)}},events:{submit:function(c){this.overlayAndSubmit(c.target,c.target.action,a.actions)}}})},becomesAjaxLink:function(a){a=
i.tools.ensureDefaults(a,{busyElement:void 0,retainedFormAttributes:["id","class","lang","dir","title","data-.*"]});return[i.submitsAsAjax(a),i.becomesLink(a)]},becomesLink:function(a){a=i.tools.ensureDefaults(a,{retainedFormAttributes:["id","class","lang","dir","title","rel","data-.*"]});return new e.does({priority:30,transform:function(f){var e;(images=jQuery("input[type=image]",f)).size()>0?(image=images[0],e="<img src='"+image.src+"' alt='"+image.alt+"'"):(submits=jQuery("input[type=submit]",
f)).size()>0?(submit=submits[0],submits.size()>1&&c("Multiple submits.  Using: "+submit),e=submit.value):(c("Couldn't find a submit input in form"),this.cantTransform());e=jQuery("<a rel='nofollow' href='#'>"+e+"</a>");this.copyAttributes(f,e,a.retainedFormAttributes);this.stash(jQuery(f).replaceWith(e));return e},events:{click:function(){this.cascadeEvent("submit")}}})},decays:function(a){a=i.tools.ensureDefaults(a,{lifetime:1E4,diesFor:600});return new e.does({priority:100,transform:function(c){jQuery(c).delay(a.lifetime).slideUp(a.diesFor,
function(){jQuery(c).remove();i.tools.fireMutationEvent()})},events:{click:[function(){jQuery(this.element).remove()},"changesDOM"]}})}}})});
define("ninja/behaviors/placeholder",["ninja"],function(i){i.packageBehaviors(function(l){function c(a){return new l.does({priority:1E3,submit:[function(c,g,f){a.prepareForSubmit();f(c)},"andDoDefault"]})}function e(a){a=i.tools.ensureDefaults(a,{textElementSelector:function(a){return"*[data-for="+a.id+"]"},findTextElement:function(c){c=$(a.textElementSelector(c));return c.length==0?null:c[0]}});return new l.does({priority:-10,transform:function(c){var g=$(a.findTextElement(c));g===null&&this.cantTransform();
this.placeholderText=g.text();$(c).attr("placeholder",g.text());this.stash(g.detach())}})}var a=!!("placeholder"in document.createElement("input")),f=!!("placeholder"in document.createElement("textarea"));if(!a)var p=function(a,f){return new l.does({helpers:{prepareForSubmit:function(){$(this.element).val("")}},transform:function(){this.applyBehaviors(f,[c(this)])},events:{focus:function(){var c=$(this.element),f=c.attr("id");c.attr("id","");c.replaceWith(a);a.attr("id",f);a.focus()}}})},r=function(a){a=
i.tools.ensureDefaults(a,{findParentForm:function(a){return a.parents("form")[0]},retainedInputAttributes:["name","class","style","title","lang","dir","size","maxlength","alt","tabindex","accesskey","data-.*"]});return new l.does({priority:1E3,helpers:{swapInAlternate:function(){var a=$(this.element),c=a.attr("id");a.val()==""&&(a.attr("id",""),a.replaceWith(this.placeholderTextInput),this.placeholderTextInput.attr("id",c))}},transform:function(c){var f,e=$(c);f=$('<input type="text">');this.copyAttributes(c,
f,a.retainedInputAttributes);f.addClass("ninja_placeholder");f.val(this.placeholderText);e=p(e,a.findParentForm(e));this.applyBehaviors(f,[e]);this.placeholderTextInput=f;this.swapInAlternate();return c},events:{blur:function(){this.swapInAlternate()}}})};if(!a||!f)var q=function(a){a=i.tools.ensureDefaults(a,{findParentForm:function(a){return a.parents("form")[0]}});return new l.does({priority:1E3,helpers:{prepareForSubmit:function(){$(this.element).hasClass("ninja_placeholder")&&$(this.element).val("")}},
transform:function(f){var e=$(f);e.addClass("ninja_placeholder");e.val(this.placeholderText);this.applyBehaviors(a.findParentForm(e),[c(this)]);return f},events:{focus:function(){$(this.element).hasClass("ninja_placeholder")&&$(this.element).removeClass("ninja_placeholder").val("")},blur:function(){$(this.element).val()==""&&$(this.element).addClass("ninja_placeholder").val(this.placeholderText)}}})};return{hasPlaceholder:function(c){var i=[e(c)];(!a||!f)&&i.push(new l.chooses(function(e){a?(e.asTextInput=
null,e.asPassword=null):(e.asTextInput=q(c),e.asPassword=r(c));e.asTextArea=f?null:q(c)},function(a){a=$(a);if(a.is("input[type=text]"))return this.asTextInput;else if(a.is("textarea"))return this.asTextArea;else if(a.is("input[type=password]"))return this.asPassword}));return i}}})});
define("ninja/behaviors/trigger-on",["ninja"],function(i){i.packageBehaviors(function(l){return{triggersOnSelect:function(c){var e=c=i.tools.ensureDefaults(c,{busyElement:void 0,placeholderText:"Select to go",placeholderValue:"instructions"});if(typeof c.actions==="object")e=c.actions;return new l.does({priority:20,helpers:{findOverlay:function(a){return this.deriveElementsFrom(a,c.busyElement)}},transform:function(a){var f=$(a).find("select").first();typeof f=="undefined"&&this.cantTransform();f.prepend("<option value='"+
c.placeholderValue+"'> "+c.placeholderText+"</option>");f.val(c.placeholderValue);$(a).find("input[type='submit']").remove();return a},events:{change:[function(a,c){this.overlayAndSubmit(c,c.action,e)},"andDoDefault"]}})}}})});define("ninja/behaviors/all",["./utility","./standard","./placeholder","./trigger-on"],function(){});
define("ninja/tools/overlay",["utils","ninja"],function(i,l){function c(a){a=this.convertToElementArray(a);this.laziness=0;var c=this;this.set=jQuery(jQuery.map(a,function(a){return c.buildOverlayFor(a)}))}var e=i.forEach;c.prototype={convertToElementArray:function(a){var c=this;switch(typeof a){case "undefined":return[];case "boolean":return[];case "string":return c.convertToElementArray(jQuery(a));case "function":return c.convertToElementArray(a());case "object":if("focus"in a&&"blur"in a&&!("jquery"in
a))return[a];else if("length"in a&&"0"in a){var i=[];e(a,function(a){i=i.concat(c.convertToElementArray(a))});return i}else return[]}},buildOverlayFor:function(a){var c=jQuery(document.createElement("div")),a=jQuery(a),e=a.offset();c.css("position","absolute");c.css("top",e.top);c.css("left",e.left);c.width(a.outerWidth());c.height(a.outerHeight());c.css("zIndex","2");c.css("display","none");return c[0]},affix:function(){this.set.appendTo(jQuery("body"));overlaySet=this.set;window.setTimeout(function(){overlaySet.css("display",
"block")},this.laziness)},remove:function(){this.set.remove()}};l.packageTools({overlay:function(){return new c(jQuery.makeArray(arguments))},busyOverlay:function(a){a=this.overlay(a);a.set.addClass("ninja_busy");a.laziness=this.ninja.config.busyLaziness;return a},buildOverlayFor:function(a){var c=jQuery(document.createElement("div")),a=jQuery(a),e=a.offset();c.css("position","absolute");c.css("top",e.top);c.css("left",e.left);c.width(a.outerWidth());c.height(a.outerHeight());c.css("zIndex","2");
return c}});return c});define("ninja/tools/json-handler",["ninja"],function(i){function l(c){this.desc=c}l.prototype={receive:function(c){this.compose([],c,this.desc);return null},compose:function(c,e,a){for(var f in e)e.hasOwnProperty(f)&&f in a&&(typeof a[f]=="function"?a[f].call(this,e[f]):this.compose(c+[f],e[f],a[f]));return null}};i.packageTools({jsonHandler:function(c){return new l(c)}});return l});
define("ninja/tools/ajax-submitter",["ninja","utils","./json-handler","./overlay"],function(i,l){function c(){this.formData=[];this.action="/";this.method="GET";this.dataType="script";return this}var e=l.log;c.prototype={submit:function(){e("Computed method: "+this.method);jQuery.ajax(this.ajaxData())},sourceForm:function(a){this.formData=jQuery(a).serializeArray()},ajaxData:function(){return{data:this.formData,dataType:this.dataType,url:this.action,type:this.method,complete:this.responseHandler(),
success:this.successHandler(),error:this.onError}},successHandler:function(){var a=this;return function(c,e,i){a.onSuccess(i,e,c)}},responseHandler:function(){var a=this;return function(c,e){a.onResponse(c,e);i.tools.fireMutationEvent()}},onResponse:function(){},onSuccess:function(){},onError:function(a){e(a.responseText);i.tools.message("Server error: "+a.statusText,"error")}};i.packageTools({ajaxSubmitter:function(){return new c},ajaxToJson:function(a){var c=this.jsonHandler(a),a=this.ajaxSubmitter();
a.dataType="json";a.onSuccess=function(a,e,i){c.receive(i)};return a},overlayAndSubmit:function(a,c,e){var i=this.busyOverlay(this.findOverlay(a)),e=typeof e=="undefined"?this.ajaxSubmitter():this.ajaxToJson(e);e.sourceForm(a);e.action=c;e.method=this.extractMethod(a,e.formData);e.onResponse=function(){i.remove()};i.affix();e.submit()}});return c});define("ninja/tools/all",["./overlay","./ajax-submitter","./json-handler"],function(){});
define("ninja/jquery",["ninja"],function(i){jQuery.extend({ninja:i,behavior:i.behavior})});require(["ninja","ninja/behaviors/all","ninja/tools/all","ninja/jquery"],function(i){window.Ninja=i;i.behavior=i.behavior});define("main",function(){});
